---
name: Interconnect Toolchain Demo
description: A ToolChain to end all toolchains
image: image.png
required:
 - catalog-api.repo
 - orders-api.repo
 - ui.repo

# Github repos
catalog-api.repo:
    capability: github
    parameters:
        name: catalog-api
        fork: skaegi/Microservices_CatalogAPI

orders-api.repo:
    capability: github
    parameters:
        name: order-api
        fork: skaegi/Microservices_OrdersAPI

ui.repo:
    capability: github
    parameters:
        name: ui
        fork: skaegi/Microservices_UI

# Pipelines
ui.build:
 capability: pipeline
 metadata: ui.pipeline.yml
 env: 
   SAUCE_USER: ${test.parameters.username}
   API_KEY: ${test.parameters.key}
   APP_NAME: ${deploy.parameters.ui-app-name}
   DEV_SPACE_NAME: ${deploy.parameters.dev-space}
   DEV_ORG_NAME: ${deploy.parameters.dev-organization}
   DEV_REGION_NAME: ${deploy.parameters.dev-region}
   QA_SPACE_NAME: ${deploy.parameters.qa-space}
   QA_ORG_NAME: ${deploy.parameters.qa-organization}
   QA_REGION_NAME: ${deploy.parameters.qa-region}
   PROD_SPACE_NAME: ${deploy.parameters.prod-space}
   PROD_ORG_NAME: ${deploy.parameters.prod-organization}
   PROD_REGION_NAME: ${deploy.parameters.prod-region}

catalog-api.build:
 capability: pipeline
 metadata: catalog-api.pipeline.yml
 env:
   APP_NAME: ${deploy.parameters.catalog-app-name}
   DEV_SPACE_NAME: ${deploy.parameters.dev-space}
   DEV_ORG_NAME: ${deploy.parameters.dev-organization}
   DEV_REGION_NAME: ${deploy.parameters.dev-region}
   QA_SPACE_NAME: ${deploy.parameters.qa-space}
   QA_ORG_NAME: ${deploy.parameters.qa-organization}
   QA_REGION_NAME: ${deploy.parameters.qa-region}
   PROD_SPACE_NAME: ${deploy.parameters.prod-space}
   PROD_ORG_NAME: ${deploy.parameters.prod-organization}
   PROD_REGION_NAME: ${deploy.parameters.prod-region}

orders-api.build:
 capability: pipeline
 metadata: order-api.pipeline.yml
 env:
   APP_NAME: ${deploy.parameters.orders-app-name}
   DEV_SPACE_NAME: ${deploy.parameters.dev-space}
   DEV_ORG_NAME: ${deploy.parameters.dev-organization}
   DEV_REGION_NAME: ${deploy.parameters.dev-region}
   QA_SPACE_NAME: ${deploy.parameters.qa-space}
   QA_ORG_NAME: ${deploy.parameters.qa-organization}
   QA_REGION_NAME: ${deploy.parameters.qa-region}
   PROD_SPACE_NAME: ${deploy.parameters.prod-space}
   PROD_ORG_NAME: ${deploy.parameters.prod-organization}
   PROD_REGION_NAME: ${deploy.parameters.prod-region}

#Slack
messaging:
  capability: slack
  metadata: slack.yml

#Sauce Laps
test:
  capability: saucelabs
  metadata: saucelabs.yml

#Deployment
deploy:
  schema: deploy.json
  capability-category: pipeline
  parameters:
    dev-space: dev
    qa-space: qa
    prod-space: prod
