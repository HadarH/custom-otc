---
name: Interconnect Toolchain Demo
description: A ToolChain to end all toolchains
image: image.png
required:
 - catalog-api.repo
 - orders-api.repo
 - ui.repo

# Github repos
catalog-api.repo:
    capability: github
    parameters:
        name: catalog-api
        fork: skaegi/Microservices_CatalogAPI

orders-api.repo:
    capability: github
    parameters:
        name: order-api
        fork: skaegi/Microservices_OrdersAPI

ui.repo:
    capability: github
    parameters:
        name: ui
        fork: skaegi/Microservices_UI

# Pipelines
ui.build:
 capability: pipeline
 metadata: ui.pipeline.yml
 env: 
   SAUCE_USER: ${test.parameters.username}
   API_KEY: ${test.parameters.key}
   DEV_APP_NAME: ${dev-stage.parameters.ui-app-name}
   DEV_SPACE_NAME: ${dev-stage.parameters.space}
   DEV_ORG_NAME: ${dev-stage.parameters.organization}
   DEV_REGION_NAME: ${dev-stage.parameters.region}
   QA_APP_NAME: ${qa-stage.parameters.ui-app-name}
   QA_SPACE_NAME: ${qa-stage.parameters.space}
   QA_ORG_NAME: ${qa-stage.parameters.organization}
   QA_REGION_NAME: ${qa-stage.parameters.region}
   PROD_APP_NAME: ${prod-stage.parameters.ui-app-name}
   PROD_SPACE_NAME: ${prod-stage.parameters.space}
   PROD_ORG_NAME: ${prod-stage.parameters.organization}
   PROD_REGION_NAME: ${prod-stage.parameters.region}

catalog-api.build:
    capability: pipeline
    metadata: catalog-api.pipeline.yml
    env:
      DEV_APP_NAME: ${dev-stage.parameters.catalog-app-name}
      DEV_SPACE_NAME: ${dev-stage.parameters.space}
      DEV_ORG_NAME: ${dev-stage.parameters.organization}
      DEV_REGION_NAME: ${dev-stage.parameters.region}
      QA_APP_NAME: ${qa-stage.parameters.catalog-app-name}
      QA_SPACE_NAME: ${qa-stage.parameters.space}
      QA_ORG_NAME: ${qa-stage.parameters.organization}
      QA_REGION_NAME: ${qa-stage.parameters.region}
      PROD_APP_NAME: ${prod-stage.parameters.catalog-app-name}
      PROD_SPACE_NAME: ${prod-stage.parameters.space}
      PROD_ORG_NAME: ${prod-stage.parameters.organization}
      PROD_REGION_NAME: ${prod-stage.parameters.region}

orders-api.build:
    capability: pipeline
    metadata: order-api.pipeline.yml
    env:
      DEV_APP_NAME: ${dev-stage.parameters.orders-app-name}
      DEV_SPACE_NAME: ${dev-stage.parameters.space}
      DEV_ORG_NAME: ${dev-stage.parameters.organization}
      DEV_REGION_NAME: ${dev-stage.parameters.region}
      QA_APP_NAME: ${qa-stage.parameters.orders-app-name}
      QA_SPACE_NAME: ${qa-stage.parameters.space}
      QA_ORG_NAME: ${qa-stage.parameters.organization}
      QA_REGION_NAME: ${qa-stage.parameters.region}
      PROD_APP_NAME: ${prod-stage.parameters.orders-app-name}
      PROD_SPACE_NAME: ${prod-stage.parameters.space}
      PROD_ORG_NAME: ${prod-stage.parameters.organization}
      PROD_REGION_NAME: ${prod-stage.parameters.region}

#Slack
messaging:
  capability: slack
  metadata: slack.yml

#Sauce Laps
test:
  capability: saucelabs
  metadata: saucelabs.yml

#Deployment
dev-stage:
  schema: stage.json
  capability-category: pipeline
  parameters:
    space: dev

qa-stage:
  schema: stage.json
  capability-category: pipeline
  parameters:
    space: qa

prod-stage:
  schema: stage.json
  capability-category: pipeline
  parameters:
    space: prod
